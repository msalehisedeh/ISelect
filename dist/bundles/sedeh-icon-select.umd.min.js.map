{"version":3,"sources":["ng://@sedeh/icon-select/src/app/iselect/components/iselect.component.ts","ng://@sedeh/icon-select/src/app/iselect/directives/iselect.directive.ts","ng://@sedeh/icon-select/src/app/iselect/iselect.module.ts"],"names":["globalActiveDropdown","CSSImagePipe","sanitizer","this","prototype","transform","url","repeat","bypassSecurityTrustStyle","Pipe","args","name","DomSanitizer","ISelect","el","renderer","EventEmitter","totalPage","currentPage","open","showFooter","hasError","isFocused","isSearch","loading","selectedItem","nativeElement","onClick","$event","target","iconBox","element","config","toggleIconSelector","ngOnInit","displayItems","configData","keyboardTracker","_this","stopPropagation","preventDefault","key","charCode","keyCode","setTimeout","index","highlightIndex","length","highlightIcon","next","prev","searchInput","invokeElementMethod","searchButton","performSearch","searchString","searchedData","i","info","toLowerCase","indexOf","push","renderIconContainer","resetSearch","setElementAttribute","size","last","first","Math","ceil","offset","slice","searchEnabled","findSelectedIndex","id","selectedIndex","selectIcon","onchange","emit","popIcons","ngOnChanges","changes","Component","selector","template","providers","ElementRef","Renderer","ViewChild","read","ViewContainerRef","Input","Output","HostListener","ISelectDirective","viewRef","componentFactoryResolver","setAttribute","list","children","option","nodeType","data","value","getAttribute","selected","disabled","innerHTML","componentFactory","resolveComponentFactory","componentRef","createComponent","domElem","rootNodes","parentNode","appendChild","instance","configID","configName","subscribe","change","undefined","Directive","ComponentFactoryResolver","ISelectModule","NgModule","imports","CommonModule","declarations","exports","entryComponents","schemas","CUSTOM_ELEMENTS_SCHEMA"],"mappings":"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","sourcesContent":["\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport {\n\tComponent,\n\tViewContainerRef,\n\tInput,\n\tOutput,\n\tRenderer,\n\tHostListener,\n\tEventEmitter,\n\tViewChild,\n\tOnInit,\n\tElementRef} from \"@angular/core\";\n\nexport interface IconInfo {\n\tid?:number,\n\tname:string,\n\tvalue:string,\n\tlabel?:string,\n\tselected?:boolean,\n\tdisabled?:boolean\n}\n\nvar globalActiveDropdown:ISelect[] = [];\n\n@Pipe({name:'CSSImage'})\nexport class CSSImagePipe implements PipeTransform{\n\n  constructor(private sanitizer:DomSanitizer){}\n  transform(url: string,repeat?:boolean): any { \n\t  return this.sanitizer.bypassSecurityTrustStyle(\"url('\"+url+\"') \"+(repeat ? \"repeat\":\"no-repeat\")+\" 0 0 transparent\");\n  }\n}\n\n/*\n* Like a regular dropdown, we want to set/get selectedIndex, select items on arrow up/down, and select item on click.\n*/\n@Component({\n    selector:'i-select',\n\ttemplateUrl: 'iselect.component.html',\n\tstyleUrls: ['iselect.component.scss'],\n\tproviders: [CSSImagePipe]\n})\nexport class ISelect implements OnInit {\n\n\tpublic selectedIndex:number = 1;\n\t\n\t@ViewChild('iconBox', {read: ViewContainerRef}) private iconBox: ViewContainerRef;\n\t@ViewChild('iconContainer', {read: ViewContainerRef}) private iconContainer: ViewContainerRef;\n\t@ViewChild('searchIcon', {read: ViewContainerRef}) private searchIcon: ViewContainerRef;\n\t@ViewChild('searchInput', {read: ViewContainerRef}) private searchInput: ViewContainerRef;\n\t@ViewChild('searchButton', {read: ViewContainerRef}) private searchButton: ViewContainerRef;\n\t\n\t@Input(\"id\")\n\tpublic configID:string = \"\";\n\n\t@Input(\"name\")\n\tpublic configName:string = \"\";\n\n\t// showIconName should be handled by css from user\n\t// @Input(\"tile\")\n\t// private configTile:boolean=true;\n\n\t@Input(\"searchEnabled\")\n\tpublic searchEnabled:boolean=false;\n\n\t@Input(\"size\")\n\tpublic size:number = 3;\n\n\t@Input(\"multiselect\")\n\tpublic multiselect = false;\n\n\t// showIconName should be handled by css from user\n\t@Input(\"showIconName\")\n\tshowIconName = false;\n\t\n\t@Input(\"entries\")\n\tpublic configData:IconInfo[] = [];\n\t\n\tdisplayItems:IconInfo[] = [];\n\t\n\t@Output(\"onchange\")\n\tpublic onchange = new EventEmitter();\n\n\thighlightIndex=0;\n\tsearchedData:IconInfo[] = [];\n\n\n\tconfig ={\n\t\ttotalPage:1,\n\t\tcurrentPage:0,\n\t\topen:false,\n\t\tshowFooter:false,\n\t\thasError:false,\n\t\tisFocused:false,\n\t\tisSearch:false,\n\t\tloading:true,\n\t\tselectedItem:<IconInfo>null\n\t}\n\n\t@HostListener('window:click', ['$event'])\n\tonClick($event:KeyboardEvent) {\n\t\tif ($event.target !== this.iconBox.element.nativeElement  && this.config.open) {\n\t\t\tthis.toggleIconSelector();\n\t\t}\n\t}\n\n\tprivate el:HTMLElement;\n\n\tconstructor(el: ElementRef,private renderer: Renderer) {\n\t\tthis.el = el.nativeElement;\n\t}\n\n\tngOnInit() {\n\t\tthis.displayItems = this.configData;\n\t}\n\n\tkeyboardTracker($event:KeyboardEvent){\n\t\t$event.stopPropagation();\n\t\t$event.preventDefault();\n\t\tlet key = $event.charCode || $event.keyCode || 0;\n\n\t\tif(key===39 || key===40){//right or down arrow\n\t\t\tsetTimeout(()=>{\n\t\t\t\tlet index = this.highlightIndex;\n\t\t\t\tif(index<this.displayItems.length-1){\n\t\t\t\t\tthis.highlightIcon(index+1);\n\t\t\t\t}else if(this.config.currentPage<this.config.totalPage){\n\t\t\t\t\tthis.next($event);\n\t\t\t\t}\n\t\t\t},66);\n\t\t} else if(key===37 || key===38){//left or up arrow\n\t\t\tsetTimeout(()=>{\n\t\t\t\tlet index = this.highlightIndex;\n\t\t\t\tif(index>0){\n\t\t\t\t\tthis.highlightIcon(index-1);\n\t\t\t\t}else if(this.config.currentPage>1){\n\t\t\t\t\tthis.prev($event);\n\t\t\t\t}\n\t\t\t},66);\n\t\t}\n\t\tif (key === 40) {\n\t\t\tthis.config.open = true;\n\t\t\tif (this.searchInput) {\n\t\t\t\tsetTimeout(()=> {\n\t\t\t\t\tthis.renderer.invokeElementMethod(this.searchInput.element.nativeElement, 'focus', [])\n\t\t\t\t\tthis.renderer.invokeElementMethod(this.searchInput.element.nativeElement, 'select', []);\n\t\t\t\t}, 22);\n\t\t\t}\n\t\t} else if (key === 38 && this.highlightIndex === 0) {\n\t\t\tthis.config.open = false;\n\t\t\tthis.renderer.invokeElementMethod(this.searchButton.element.nativeElement, 'focus', []);\n\t\t}\n\t\treturn false;\n\t}\n\tperformSearch($event:KeyboardEvent, searchString:string){\n\t\tlet key = $event.charCode || $event.keyCode || 0;\n\t\tif(key>36 && key<41){\n\t\t\treturn this.keyboardTracker($event);\n\t\t}\n\t\tif (searchString === '') {\n\t\t\tthis.resetSearch();\n\t\t\treturn;\n\t\t}\n\t\t//this.searchIcon.removeClass('picker-icon-search');\n\t\t//this.searchIcon.addClass('picker-icon-cancel');\n\t\tthis.config.isSearch = true;\n\n\t\tthis.searchedData = [];\n\t\tfor(let i:number=0;i<this.configData.length;i++){\n\t\t\tlet info = this.configData[i];\n\t\t\tif (info.name.toLowerCase().indexOf(searchString.toLowerCase())>=0) {\n\t\t\t\tthis.searchedData.push(info);\n\t\t\t}\n\t\t}\n\t\tif(this.searchedData.length){\n\t\t\tthis.config.currentPage = 1;\n\t\t\tthis.highlightIndex = 0;\n\t\t\tthis.config.selectedItem = this.searchedData[0];\n\t\t\tthis.displayItems = this.searchedData;\n\t\t\tthis.highlightIcon(this.highlightIndex);\n\t\t}else {\n\t\t\tthis.config.selectedItem = null;\n\t\t}\n\t\tthis.renderIconContainer();\n\t}\n\tresetSearch(){\n\t\tthis.renderer.setElementAttribute(this.searchInput.element.nativeElement,'value','');\n\n\t\t//this.searchIcon.removeClass('picker-icon-cancel');\n\t\t//this.searchIcon.addClass('picker-icon-search');\n\n\t\tthis.config.currentPage = 1;\n\t\tthis.config.isSearch = false;\n\t\tthis.highlightIndex = 0;\n\t\tthis.displayItems = this.configData;\n\t\tthis.config.selectedItem = this.configData[0];\n\t\tthis.highlightIcon(this.highlightIndex);\n\n\t\tthis.renderIconContainer();\n\t}\n\tnext($event:any){\n\t\t$event.stopPropagation();\n\n\t\tif (this.config.currentPage < this.config.totalPage) {\n\t\t\tthis.config.currentPage++;\n \t\t\tthis.renderIconContainer();\n\t\t}\n\t\tthis.highlightIndex=0;\n\t\tthis.highlightIcon(this.highlightIndex);\n\t\t\n\t\treturn false;\n\t}\n\tprev($event:any){\n\t\t$event.stopPropagation();\n\n\t\tif (this.config.currentPage > 1) {\n\t\t\tthis.config.currentPage--;\n \t\t    this.renderIconContainer();\n\t\t}\n\t\tthis.highlightIndex=this.size-1;\n\t\tthis.highlightIcon(this.highlightIndex);\n\t\t\n\t\treturn false;\n\t}\n\tlast($event:any){\n\t\t$event.stopPropagation();\n\n\t\tif (this.config.currentPage < this.config.totalPage) {\n\t\t\tthis.config.currentPage = this.config.totalPage;\n\t\t    this.renderIconContainer();\n\t\t}\n\t\tthis.highlightIndex=0;\n\t\tthis.highlightIcon(this.highlightIndex);\n\n\t\treturn false;\n\t}\n\n\tfirst($event:any){\n\t\t$event.stopPropagation();\n\n\t\tif (this.config.currentPage > 1) {\n\t\t\tthis.config.currentPage = 1;\n\t\t    this.renderIconContainer();\n\t\t}\n\t\tthis.highlightIndex=this.size-1;\n\t\tthis.highlightIcon(this.highlightIndex);\n\n\t\treturn false;\n\t}\n\trenderIconContainer(){\n\t\tthis.displayItems = (this.config.isSearch ? this.searchedData : this.configData);\n\t\tthis.config.totalPage = Math.ceil(this.displayItems.length / this.size);\n\t\t\n\t\tthis.config.showFooter = (this.config.totalPage > 1);\n\n\t\tlet offset = (this.config.currentPage - 1) * this.size;\n\n\t\tif(this.displayItems.length<1 ){\n\t\t\tthis.config.hasError = true;\n\t\t}else {\n\t\t\tthis.config.hasError = false;\n\t\t\tthis.displayItems = this.displayItems.slice(offset, offset + this.size);\n\t\t}\n\t}\n\ttoggleIconSelector(){\n\t\tthis.config.open = !this.config.open;\n\n\t\tif (this.config.open && this.searchEnabled) {\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.renderer.invokeElementMethod(this.searchInput.element.nativeElement, 'focus', []);\n\t\t\t\tthis.renderer.invokeElementMethod(this.searchInput.element.nativeElement, 'select', []);\n\t\t\t}, 20);\n\t\t}\n\t}\n\tprivate findSelectedIndex(){\n\t\tif(this.config.selectedItem){\n\t\tfor(let i:number=0;i<this.configData.length;i++){\n\t\t\tif(this.configData[i].id==this.config.selectedItem.id){\n\t\t\t\tthis.selectedIndex = i;\n\t\t\t}\n\t\t}\n\t\t}\n\t}\n\tselectIcon(index:number){\n\t\tif(this.displayItems){\n\t\t\tthis.config.selectedItem = this.displayItems[index];\n\t\t\tthis.findSelectedIndex();\n\t\t\tthis.onchange.emit(this.config.selectedItem);\n\t\t}\n\t}\n\thighlightIcon(index:number){\n\t\tthis.highlightIndex = index;\n\t\tif(this.displayItems){\n\t\t\tthis.config.selectedItem = this.displayItems[this.highlightIndex];\n\t\t\tthis.findSelectedIndex();\n\t\t\tthis.onchange.emit(this.config.selectedItem);\n\t\t}\n\t}\n\tpopIcons($event:any){\n\t\t$event.stopPropagation();\n\t\tfor(let i:number=0;i<globalActiveDropdown.length;i++){\n\t\t\tif(globalActiveDropdown[i]!=this && globalActiveDropdown[i].config.open){\n\t\t\t\tglobalActiveDropdown[i].toggleIconSelector();\n\t\t\t}\n\t\t}\n\t\tthis.toggleIconSelector();\n\t\treturn false;\n\t}\n\n\tngOnChanges(changes:any) {\n\t\tsetTimeout(()=>{\n\t\tfor(let i:number=0;i<this.configData.length;i++){this.configData[i].id= i}\n\t\n\t\tthis.config.currentPage = Math.ceil(this.selectedIndex/(this.size-1));\n\t\tthis.highlightIndex=this.selectedIndex-((this.config.currentPage-1)*this.size);\n\t\tthis.renderIconContainer();\n\n\t\tglobalActiveDropdown.push(this);\n\t\tif(this.config.totalPage>1){\n\t\t\tthis.config.loading = false;\n\t\t}\n\t\tthis.config.selectedItem = this.displayItems[this.highlightIndex];\n\t\tthis.onchange.emit(this.config.selectedItem);\n\t\t},10);\n\t}\n\n}\n","import {\r\n    Directive,\r\n    ViewContainerRef,\r\n    ElementRef,\r\n    Input,\r\n    Output,\r\n    OnInit,\r\n\tComponentFactoryResolver,\r\n    ComponentRef,\r\n    EventEmitter,\r\n    EmbeddedViewRef\r\n} from '@angular/core';\r\n\r\nimport { ISelect } from '../components/iselect.component';\r\n\r\n@Directive({\r\n    selector: '[i-select]'\r\n})\r\nexport class ISelectDirective implements OnInit {\r\n    private data = [];\r\n\r\n\t@Input(\"searchEnabled\")\r\n\tpublic searchEnabled:boolean=false;\r\n\r\n    @Output(\"change\")\r\n    change = new EventEmitter();\r\n\r\n    constructor(\r\n        private viewRef: ViewContainerRef,\r\n        public el:ElementRef,\r\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver\r\n    ) {\r\n    }\r\n    \r\n\tngOnInit() {\r\n        this.el.nativeElement.setAttribute(\"style\",\"display:none\")\r\n        setTimeout(()=>{\r\n            const list: HTMLCollection = this.el.nativeElement.children;\r\n            for(let i = 0; i < list.length; i++) {\r\n                const option = list[i];\r\n                if (option.nodeType === 1) {    \r\n                    this.data.push({\r\n                        value: option.getAttribute(\"value\"),\r\n                        selected: option.getAttribute(\"selected\"),\r\n                        disabled: option.getAttribute(\"disabled\"),\r\n                        name: option.innerHTML\r\n                    })    \r\n                }\r\n            }\r\n            let componentFactory = this.componentFactoryResolver.resolveComponentFactory(ISelect);\r\n            let componentRef: ComponentRef<any> = this.viewRef.createComponent(componentFactory);\r\n            const domElem = (componentRef.hostView as EmbeddedViewRef < any > ).rootNodes[0] as HTMLElement;\r\n            this.el.nativeElement.parentNode.appendChild(domElem);\r\n            const instance:ISelect = (<ISelect>componentRef.instance);\r\n            instance.searchEnabled = this.searchEnabled;\r\n            instance.configID = this.el.nativeElement.id+\"-iselect\";\r\n            instance.size = this.el.nativeElement.size;\r\n            instance.configName = this.el.nativeElement.name;\r\n            instance.onchange.subscribe(this.change);\r\n            instance.configData = this.data;\r\n            instance.ngOnInit();\r\n            instance.ngOnChanges(undefined);\r\n        }, 66)\r\n\t}\r\n}\r\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { CommonModule, DatePipe, CurrencyPipe, DecimalPipe, JsonPipe, SlicePipe, UpperCasePipe, LowerCasePipe } from '@angular/common';\r\n\r\nimport { ISelect, CSSImagePipe } from './components/iselect.component';\r\nimport { ISelectDirective } from './directives/iselect.directive'\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: [\r\n    ISelect,\r\n    CSSImagePipe,\r\n    ISelectDirective\r\n  ],\r\n  exports: [\r\n    ISelect,\r\n    CSSImagePipe,\r\n    ISelectDirective\r\n  ],\r\n  entryComponents: [\r\n    ISelect\r\n  ],\r\n  providers: [\r\n    CSSImagePipe,\r\n    ISelectDirective\r\n  ],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\n\r\nexport class ISelectModule {}\r\n"]}