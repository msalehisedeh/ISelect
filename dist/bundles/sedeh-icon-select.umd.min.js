!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/platform-browser"),require("@angular/common")):"function"==typeof define&&define.amd?define("@sedeh/icon-select",["exports","@angular/core","@angular/platform-browser","@angular/common"],t):t((e.sedeh=e.sedeh||{},e.sedeh["icon-select"]={}),e.ng.core,e.ng.platformBrowser,e.ng.common)}(this,function(e,o,t,i){"use strict";var n=[],s=function(){function e(e){this.sanitizer=e}return e.prototype.transform=function(e,t){return this.sanitizer.bypassSecurityTrustStyle("url('"+e+"') "+(t?"repeat":"no-repeat")+" 0 0 transparent")},e.decorators=[{type:o.Pipe,args:[{name:"CSSImage"}]}],e.ctorParameters=function(){return[{type:t.DomSanitizer}]},e}(),a=function(){function e(e,t){this.renderer=t,this.selectedIndex=1,this.configID="",this.configName="",this.searchEnabled=!1,this.size=3,this.multiselect=!1,this.showIconName=!1,this.configData=[],this.displayItems=[],this.onchange=new o.EventEmitter,this.highlightIndex=0,this.searchedData=[],this.config={totalPage:1,currentPage:0,open:!1,showFooter:!1,hasError:!1,isFocused:!1,isSearch:!1,loading:!0,selectedItem:null},this.el=e.nativeElement}return e.prototype.onClick=function(e){this.config.open&&this.toggleIconSelector()},e.prototype.ngOnInit=function(){this.displayItems=this.configData},e.prototype.keyboardTracker=function(t){var i=this;t.stopPropagation(),t.preventDefault();var e=t.charCode||t.keyCode||0;return console.log(e),39===e||40===e?setTimeout(function(){var e=i.highlightIndex;e<i.displayItems.length-1?i.highlightIcon(e+1):i.config.currentPage<i.config.totalPage&&i.next(t)},66):37!==e&&38!==e||setTimeout(function(){var e=i.highlightIndex;0<e?i.highlightIcon(e-1):1<i.config.currentPage&&i.prev(t)},66),!1},e.prototype.performSearch=function(e,t){var i=e.charCode||e.keyCode||0;if(36<i&&i<41)return this.keyboardTracker(e);if(""!==t){this.config.isSearch=!0,this.searchedData=[];for(var o=0;o<this.configData.length;o++){var n=this.configData[o];0<=n.name.toLowerCase().indexOf(t.toLowerCase())&&this.searchedData.push(n)}this.searchedData.length?(this.config.currentPage=1,this.highlightIndex=0,this.config.selectedItem=this.searchedData[0],this.displayItems=this.searchedData,this.highlightIcon(this.highlightIndex)):this.config.selectedItem=null,this.renderIconContainer()}else this.resetSearch()},e.prototype.resetSearch=function(){this.renderer.setElementAttribute(this.searchInput.element.nativeElement,"value",""),this.config.currentPage=1,this.config.isSearch=!1,this.highlightIndex=0,this.displayItems=this.configData,this.config.selectedItem=this.configData[0],this.highlightIcon(this.highlightIndex),this.renderIconContainer()},e.prototype.next=function(e){return e.stopPropagation(),this.config.currentPage<this.config.totalPage&&(this.config.currentPage++,this.renderIconContainer()),this.highlightIndex=0,this.highlightIcon(this.highlightIndex),!1},e.prototype.prev=function(e){return e.stopPropagation(),1<this.config.currentPage&&(this.config.currentPage--,this.renderIconContainer()),this.highlightIndex=this.size-1,this.highlightIcon(this.highlightIndex),!1},e.prototype.last=function(e){return e.stopPropagation(),this.config.currentPage<this.config.totalPage&&(this.config.currentPage=this.config.totalPage,this.renderIconContainer()),this.highlightIndex=0,this.highlightIcon(this.highlightIndex),!1},e.prototype.first=function(e){return e.stopPropagation(),1<this.config.currentPage&&(this.config.currentPage=1,this.renderIconContainer()),this.highlightIndex=this.size-1,this.highlightIcon(this.highlightIndex),!1},e.prototype.renderIconContainer=function(){this.displayItems=this.config.isSearch?this.searchedData:this.configData,this.config.totalPage=Math.ceil(this.displayItems.length/this.size),this.config.showFooter=1<this.config.totalPage;var e=(this.config.currentPage-1)*this.size;this.displayItems.length<1?this.config.hasError=!0:(this.config.hasError=!1,this.displayItems=this.displayItems.slice(e,e+this.size))},e.prototype.toggleIconSelector=function(){var e=this;this.config.open=!this.config.open,this.config.open&&this.searchEnabled&&setTimeout(function(){e.renderer.invokeElementMethod(e.searchInput.element.nativeElement,"focus",[]),e.renderer.invokeElementMethod(e.searchInput.element.nativeElement,"select",[])},20)},e.prototype.findSelectedIndex=function(){if(this.config.selectedItem)for(var e=0;e<this.configData.length;e++)this.configData[e].id==this.config.selectedItem.id&&(this.selectedIndex=e)},e.prototype.selectIcon=function(e){this.displayItems&&(this.config.selectedItem=this.displayItems[e],this.findSelectedIndex(),this.onchange.emit(this.config.selectedItem))},e.prototype.highlightIcon=function(e){this.highlightIndex=e,this.displayItems&&(this.config.selectedItem=this.displayItems[this.highlightIndex],this.findSelectedIndex(),this.onchange.emit(this.config.selectedItem))},e.prototype.popIcons=function(e){e.stopPropagation();for(var t=0;t<n.length;t++)n[t]!=this&&n[t].config.open&&n[t].toggleIconSelector();return this.toggleIconSelector(),!1},e.prototype.ngOnChanges=function(e){var t=this;setTimeout(function(){for(var e=0;e<t.configData.length;e++)t.configData[e].id=e;t.config.currentPage=Math.ceil(t.selectedIndex/(t.size-1)),t.highlightIndex=t.selectedIndex-(t.config.currentPage-1)*t.size,t.renderIconContainer(),n.push(t),1<t.config.totalPage&&(t.config.loading=!1),t.config.selectedItem=t.displayItems[t.highlightIndex],t.onchange.emit(t.config.selectedItem)},10)},e.decorators=[{type:o.Component,args:[{selector:"i-select",template:'<div class="i-select" [id]="configID">\n    <div class="selected-icon">\n        <div class="select-icon-block" \n            [style.background]="config.selectedItem ? (config.selectedItem.value | CSSImage:true)  : \'\'"></div>\n        <div class="fa-li fa fa-spinner fa-spin select-icon-spin3" *ngIf="config.loading"></div>\n    </div>\n    <a href="#" class="i-select-button" \n        (click)="popIcons($event)" \n        (keyup)="keyboardTracker($event)" >\n    <span class="off-screen" id="{{configID}}name" [textContent]="configName"></span>\n    <span class="select-icon-down-dir"></span>\n    </a>\n</div>\n<div class="i-select-popup" [style.display]="config.open ? \'block\':\'none\'" >\n    <div class="i-select-search" (click)="searchInput.focus()" *ngIf="searchEnabled">\n        <input type="text" placeholder="placeholder" #searchInput\n            class="icons-search-input" \n            [class.focused]="config.isFocused"\n            (focus)="config.isFocused=true"\n            (blur)="config.isFocused=false"\n            (keyup)="performSearch($event, searchInput.value)" />\n        <div class="select-icon-search" #searchIcon [class]="config.isSearch ? \'select-icon-cancel\' : \'select-icon-search\'"></div>\n    </div>\n    <div class="clear-fix"></div>\n    <div role="list" attr.aria-nameledby="{{configID}}name" class="select-icons-container" #iconContainer>\n    <div \n        role="listitem" \n        class="select-box" \n        *ngFor="let item of displayItems; let i = index">\n        <div [class.highlight-icon]="highlightIndex==i"\n            [class.cover]="!true" [title]="showIconName ? \'\':item.name"\n            [style.background]="item.value | CSSImage:true"\n            (click)="selectIcon(i)"><span class="off-screen" [textContent]="item.name"></span></div>\n    </div>\n    </div>\n    <div class="icons-select-error" *ngIf="config.hasError"><div class="select-icon-block" data-select-value="select-icon-block"></div></div>\n    <div class="i-select-footer" *ngIf="config.showFooter">\n    <div class="i-select-arrows">\n        <div class="fa fa-angle-left"\n            (click)="prev($event)"\n            [class.disabled]="config.currentPage==1">\n            <span class="prev" [textContent]="\'previous\'"></span>\n        </div>\n        <div class="fa fa-angle-double-left"\n                (click)="first($event)"\n                [class.disabled]="config.currentPage==1">\n            <span class="first" [textContent]="\'first\'"></span>\n        </div>\n        <div class="i-select-pages"><span [textContent]="config.currentPage + \' / \' + config.totalPage"></span></div>\n        <div class="fa fa-angle-double-right"\n                (click)="last($event)"\n                [class.disabled]="config.currentPage==config.totalPage">\n            <span class="last" [textContent]="\'last\'"></span>\n        </div>\n        <div class="fa fa-angle-right"\n                (click)="next($event)"\n                [class.disabled]="config.currentPage==config.totalPage">\n            <span class="next" [textContent]="\'nextPage\'"></span>\n        </div>\n    </div>\n    </div>\n    <div class="name" *ngIf="showIconName" [textContent]="config.selectedItem ? config.selectedItem.name : \'\'"></div>\n</div>\n',providers:[s],styles:[":host *{margin:0;padding:0;border:0;vertical-align:baseline}:host{display:block;text-align:left;vertical-align:middle;margin:2px 0}:host .off-screen{display:block;text-indent:-9999px;width:0;height:0}:host .select-box{background-color:#ccc;background-size:contain;display:inline-block;margin:2px;width:60px;line-height:42px;text-align:center;cursor:pointer;vertical-align:top;height:40px;border:1px solid #efefef}:host .select-box:focus,:host .select-box:hover{border:1px solid #888}:host .select-box div{background-repeat:repeat;background-color:transparent;background-position:0 0;border:1px solid transparent;height:40px;width:60px}:host .select-box .highlight-icon{background-repeat:repeat;background-color:transparent;background-position:0 0;border:2px solid red;height:40px;width:60px}:host .name{color:#444;font-size:.8em;text-align:center;text-shadow:0 1px 0 #eee}:host .i-select-footer{line-height:12px;text-align:center}:host .i-select-footer .i-select-arrows{float:right}:host .i-select-footer .i-select-arrows div{color:#444;cursor:pointer;display:inline-block;height:16px}:host .i-select-footer .i-select-arrows div.disabled{color:#ddd;cursor:default;font-weight:700}:host .i-select-footer .i-select-arrows div .first,:host .i-select-footer .i-select-arrows div .last,:host .i-select-footer .i-select-arrows div .next,:host .i-select-footer .i-select-arrows div .prev{cursor:pointer;width:auto;display:inline-block;height:39px;text-indent:-99999px;box-sizing:border-box}:host .i-select-footer .i-select-arrows div .i-select-pages{font-size:11px}:host .i-select-footer .i-select-arrows div:focus,:host .i-select-footer .i-select-arrows div:hover{color:#777}:host .selected-icon{background-color:#ccc;background-size:contain;display:block;width:60px;height:100%;float:left;position:relative;text-align:center}:host .selected-icon div{cursor:default;color:#404040;height:100%;width:60px}:host .i-select{height:22px;background-color:#fff;border:1px solid #ededed;border-radius:0 4px 4px 0}:host .i-select.focused{border:1px dotted #444}:host .i-select-category select{border:1px solid #ededed;line-height:20px;padding:3px;width:100%;height:40px;-ms-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box;margin-bottom:5px;font-size:12px;display:block;color:#404040;-ms-box-shadow:none;-o-box-shadow:none;box-shadow:none;outline:0}:host .i-select-category select option{padding:10px}:host .i-select-button{cursor:pointer;display:block;float:left;height:100%;text-align:center;width:20px;background-color:#f4f4f4;border-left:1px solid #e1e1e1;border-radius:0 4px 4px 0}:host .i-select-button:focus .select-icon-up-dir{border-top:5px solid grey}:host .i-select-button:focus .select-icon-down-dir{border-top:5px solid grey}:host .i-select-button:focus,:host .i-select-button:hover{background-color:#f1f1f1 div;background-color-color:#999}:host .i-select-button div{color:#aaa;text-shadow:0 1px 0 #fff}:host .i-select-button .select-icon-down-dir{border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;float:left;height:0;margin:10px 5px;width:0}:host .i-select-button .select-icon-up-dir{border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000;float:left;height:0;margin:15px 10px;width:0}:host .select-icons-container{width:100%;box-sizing:border-box;padding:5px;background-color:#fff;border:1px solid #d3d3d3}:host .select-icons-container .loading{color:#eee;font-size:24px;margin:0 auto;padding:20px 0;text-align:center;width:100%}:host .i-select-popup{position:absolute;z-index:10000;background-color:#fefefe;padding:5px;height:auto;width:210px;margin-top:-1px;-ms-box-shadow:0 1px 1px rgba(0,0,0,.04);-o-box-shadow:0 1px 1px rgba(0,0,0,.04);box-shadow:0 1px 1px rgba(0,0,0,.04);border:1px solid #e5e5e5}:host .i-select-search{position:relative}:host .i-select-search input[type=text]{text-transform:uppercase;border:1px solid #ededed;color:#404040;-ms-box-shadow:none;-o-box-shadow:none;box-shadow:none;outline:0;width:100%;margin:3px 0;padding:3px;box-sizing:border-box}:host .i-select-search div{color:#ddd;position:absolute;right:10px;top:7px}:host input::-webkit-input-placeholder{text-transform:uppercase;color:#ddd}:host input:-moz-placeholder{text-transform:uppercase;color:#ddd}:host input::-moz-placeholder{text-transform:uppercase;color:#ddd}:host input:-ms-input-placeholder{text-transform:uppercase;color:#ddd!important}:host .select-icon-spin3{position:absolute;top:0;left:0;width:16px!important;height:16px!important;display:inline-block;margin:0!important;padding:3px!important}:host .icons-select-error div:before{color:#444}:host .select-icon-search{cursor:default}:host .select-icon-cancel{cursor:pointer}:host .select-icon-block{background-color:#fed0d0;background-size:contain}:host .current-icon,:host .current-icon:focus,:host .current-icon:hover{border:1px solid #444}:host .fa{padding:3px 6px;margin-top:5px}"]}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:o.Renderer}]},e.propDecorators={searchIcon:[{type:o.ViewChild,args:["searchIcon",{read:o.ViewContainerRef}]}],searchInput:[{type:o.ViewChild,args:["searchInput",{read:o.ViewContainerRef}]}],iconContainer:[{type:o.ViewChild,args:["iconContainer",{read:o.ViewContainerRef}]}],configID:[{type:o.Input,args:["id"]}],configName:[{type:o.Input,args:["name"]}],searchEnabled:[{type:o.Input,args:["searchEnabled"]}],size:[{type:o.Input,args:["size"]}],multiselect:[{type:o.Input,args:["multiselect"]}],showIconName:[{type:o.Input,args:["showIconName"]}],configData:[{type:o.Input,args:["entries"]}],onchange:[{type:o.Output,args:["onchange"]}],onClick:[{type:o.HostListener,args:["window:click",["$event"]]}]},e}(),r=function(){function e(e,t,i){this.viewRef=e,this.el=t,this.componentFactoryResolver=i,this.data=[],this.searchEnabled=!1,this.change=new o.EventEmitter}return e.prototype.ngOnInit=function(){var c=this;this.el.nativeElement.setAttribute("style","display:none"),setTimeout(function(){for(var e=c.el.nativeElement.children,t=0;t<e.length;t++){var i=e[t];1===i.nodeType&&c.data.push({value:i.getAttribute("value"),selected:i.getAttribute("selected"),disabled:i.getAttribute("disabled"),name:i.innerHTML})}var o=c.componentFactoryResolver.resolveComponentFactory(a),n=c.viewRef.createComponent(o),s=n.hostView.rootNodes[0];c.el.nativeElement.parentNode.appendChild(s);var r=n.instance;r.searchEnabled=c.searchEnabled,r.configID=c.el.nativeElement.id+"-iselect",r.size=c.el.nativeElement.size,r.configName=c.el.nativeElement.name,r.onchange.subscribe(c.change),r.configData=c.data,r.ngOnInit(),r.ngOnChanges(undefined)},66)},e.decorators=[{type:o.Directive,args:[{selector:"[i-select]"}]}],e.ctorParameters=function(){return[{type:o.ViewContainerRef},{type:o.ElementRef},{type:o.ComponentFactoryResolver}]},e.propDecorators={searchEnabled:[{type:o.Input,args:["searchEnabled"]}],change:[{type:o.Output,args:["change"]}]},e}(),c=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[i.CommonModule],declarations:[a,s,r],exports:[a,s,r],entryComponents:[a],providers:[s,r],schemas:[o.CUSTOM_ELEMENTS_SCHEMA]}]}],e}();e.ISelect=a,e.CSSImagePipe=s,e.ISelectDirective=r,e.ISelectModule=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=sedeh-icon-select.umd.min.js.map